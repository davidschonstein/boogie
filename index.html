<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Surf Foil Session Map</title>

  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
          integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.4.1/papaparse.min.js"></script>

  <link rel="stylesheet" href="./styles.css" />
</head>
<body>
  <div id="map"></div>

  <!-- Playback controls (top-right; avoids Leaflet zoom/layers in top-left) -->
  <div id="playbackControls" class="panel">
    <div class="row compact">
      <div class="group">
        <button id="btnPlay" class="btn">▶</button>
        <button id="btnPause" class="btn">❚❚</button>
        <button id="btnFade" class="btn">Fade</button>

        <label class="label">Speed
          <select id="selSpeed" class="select">
            <option value="1" selected>1×</option>
            <option value="4">4×</option>
            <option value="8">8×</option>
            <option value="16">16×</option>
          </select>
        </label>
      </div>

      <div class="group">
        <button id="btnToggleInsights" class="btn">Insights</button>
        <button id="btnToggleLegend" class="btn">Legend</button>
      </div>
    </div>

    <div class="row compact">
      <label class="label">Session
        <select id="logSelect" class="select">
          <option value="">Loading…</option>
        </select>
      </label>
    </div>

    <div class="row compact">
      <input id="timeSlider" type="range" min="0" value="0" step="1" />
      <div id="timeLabel" class="mono">t=0.0s</div>
    </div>

    <div class="row compact meta">
      <a href="#" id="toggleInstructions" class="link">Instructions</a>
      <span id="status" class="status"></span>
    </div>

    <div id="instructions" class="instructions hidden">
      Track starts blank. Hit <b>Play</b> or drag the slider. Fade horizon: <b>10 minutes</b> (toggle with Fade).
      Nav mode <b>7</b> runs show <b>distance</b> + <b>duration</b> at the run end.
    </div>
  </div>

  <!-- Insights panel (center-right) -->
  <div id="insights" class="panel insights">
    <div class="insights-title">Session insights</div>
    <div id="insightsBody" class="insights-body">
      <div class="muted">Load a session to see stats.</div>
    </div>
  </div>

  <!-- Legend (bottom-right; smaller) -->
  <div id="legend" class="panel legend">
    <div class="legend-title">Nav mode</div>
    <div id="legendItems"></div>
  </div>

  <script src="./app.js"></script>
</body>
</html>
